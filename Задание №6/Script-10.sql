USE vk;

ALTER TABLE communities_users
	ADD constraint comm_users_fk FOREIGN KEY (user_id) REFERENCES users (id),
	ADD constraint comm_users_comm_id_fk FOREIGN KEY (community_id) REFERENCES communities (id)
	;
	
ALTER TABLE contacts 
	ADD CONSTRAINT contacts_user_id_fk FOREIGN KEY (user_id) REFERENCES users (id)
	;
	
ALTER TABLE friendship
	ADD CONSTRAINT friendship_user_id_fk FOREIGN KEY (user_id) REFERENCES users (id),
	ADD CONSTRAINT friendship_friend_id_fk FOREIGN KEY (friend_id) REFERENCES users (id),
	ADD CONSTRAINT friendship_status_id_fk FOREIGN KEY (status_id) REFERENCES friendship_statuses (id)
	;
	
ALTER TABLE profiles 	
	ADD CONSTRAINT profiles_user_id_fk FOREIGN KEY (user_id) REFERENCES users (id),
	ADD CONSTRAINT profiles_gender_id_fk FOREIGN KEY (gender_id) REFERENCES gender (id),
	ADD CONSTRAINT profiles_photo_id_fk FOREIGN KEY (photo_id) REFERENCES media (id),
	ADD CONSTRAINT profiles_user_status_id_fk FOREIGN KEY (user_status_id) REFERENCES user_statuses(id)
	;
	
CREATE TABLE likes (
	id INT unsigned NOT NULL AUTO_INCREMENT,
	post_id INT unsigned DEFAULT NULL COMMENT 'post id from posts',
	user_like_id INT unsigned DEFAULT NULL COMMENT 'user id from users',
	like_date datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'date of like creation',
	PRIMARY KEY (id)
	);

CREATE TABLE posts (
	id INT UNSIGNED AUTO_INCREMENT,
	user_id INT UNSIGNED,
	message VARCHAR(5000) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL,
	media INT UNSIGNED DEFAULT NULL COMMENT 'link to media from appropriate table',
	deleted TINYINT(1) DEFAULT '0',
	PRIMARY KEY (id)
	

);
	


INSERT INTO `posts` VALUES ('1','95','Ducimus mollitia iste harum in. Sequi iusto ipsum commodi dignissimos quia sed unde voluptatem. Natus non vero possimus labore accusamus sit id dicta. Aut nostrum dolor vero molestiae consequatur aliquid.','13','1'),
('2','88','Magni pariatur voluptatem amet inventore officiis odio nam quo. Esse nulla autem totam qui tenetur impedit praesentium.','0','1'),
('3','77','Molestias vero beatae a id cum dignissimos dolorem culpa. Et recusandae quo ipsam voluptatum beatae. Facere dolores facilis ea tempore esse sit id. Tenetur et temporibus dolorum quas libero.','70','1'),
('4','17','Cumque molestias velit sit autem iusto in incidunt. Sit recusandae aut voluptatem molestiae dolorem. Nulla enim a repellat est nihil non aut. Accusamus dolor quo ipsam.','0','1'),
('5','12','Totam est omnis aut facilis soluta consequuntur perferendis. Asperiores modi ipsam et at tempora. Qui ex totam impedit voluptates porro consequatur nisi cupiditate. Voluptatum suscipit sit alias sunt quae eius.','42','0'),
('6','38','Ratione velit non ullam nam. Laboriosam minus neque consequuntur quia illo neque. Hic corporis distinctio quos sunt ut enim voluptatem.','0','1'),
('7','63','Velit quia neque explicabo deleniti officia nihil repellendus et. Voluptates est sit dolorem unde aut tempora laudantium quos. Iure corporis soluta facere. Cum aut rerum quaerat voluptatem provident mollitia.','0','0'),
('8','48','Quae corrupti qui molestiae itaque. Debitis voluptas illum sunt. Molestias velit labore voluptas et.','0','1'),
('9','78','Aut voluptatum illum id sunt inventore. Voluptas et vel sint est voluptas. Qui sit voluptatem voluptas doloremque vero voluptate. Repudiandae reprehenderit et repudiandae atque quas.','0','0'),
('10','65','Molestiae necessitatibus aut minus sed rerum at. Necessitatibus ad facere laudantium possimus modi. Ipsum explicabo sint explicabo voluptatem autem.','0','0'),
('11','63','Quod placeat tempore sed. Et quia harum harum nulla necessitatibus reiciendis unde. Commodi blanditiis cumque nulla esse. Ipsam earum odio et ut.','34','0'),
('12','85','At sit ea commodi corporis. Nisi nihil est voluptas. Nisi est libero natus quae ratione minus. Laborum accusamus exercitationem ut deserunt culpa unde.','56','0'),
('13','85','Consequuntur cum ut tempora repudiandae iusto ut. Facere ipsum at est voluptatem recusandae eveniet cum.','34','1'),
('14','79','Est et ut mollitia occaecati perferendis. Nostrum dignissimos vitae veniam error animi.','28','1'),
('15','55','Ut cupiditate ut aliquid voluptatem ut quae. Sed fuga non debitis perferendis atque enim amet.','0','0'),
('16','58','Praesentium aliquid et tempora sunt aperiam quam. Porro deserunt non pariatur est impedit et commodi labore. Aut eum voluptatem est et nisi eligendi consequatur voluptates. Dolor quis repudiandae blanditiis.','0','1'),
('17','7','Quam incidunt adipisci eaque quisquam et et. Odit quia dignissimos sed fugiat id dolorum eos dolores. Vitae amet sunt incidunt nam.','0','1'),
('18','41','Accusantium assumenda voluptatum rem fugit. Sed voluptatem omnis iure ut. Praesentium in commodi est officiis possimus nesciunt sed. Numquam molestiae est ut cupiditate.','39','1'),
('19','21','Et est quas labore. Voluptas adipisci voluptatem ut. Ut unde molestiae incidunt modi suscipit numquam.','48','1'),
('20','94','Labore et earum ad corporis qui a laborum. Non autem voluptas sit nihil. In alias ad expedita nostrum explicabo. Magnam blanditiis magnam mollitia exercitationem dolores in ad. Deserunt quod et veritatis amet non facere veniam.','82','1'),
('21','43','Voluptatibus est dicta aut maxime id. Quasi repellendus molestias quod non deserunt aut. Nemo quibusdam sint consectetur error adipisci quo pariatur.','0','0'),
('22','52','Libero at laboriosam a libero impedit praesentium. Quibusdam illo dignissimos aliquam pariatur harum maiores iste. Mollitia cum eos laudantium velit ducimus eveniet alias deserunt.','94','0'),
('23','22','Praesentium laudantium quos iure explicabo aperiam laboriosam. Fuga dolores id distinctio esse nemo eos. Optio dolor error mollitia voluptatem quaerat quia consequatur.','0','0'),
('24','57','Quaerat error dolores libero velit consequuntur voluptatem. Rerum et aut deleniti aut velit. Enim ipsam eum autem.','0','0'),
('25','60','Necessitatibus magni temporibus enim qui reprehenderit ex. Dolor maiores facilis et nihil nam culpa occaecati. Qui temporibus esse accusamus perspiciatis quo unde vitae. Nobis earum est provident labore vitae tempora. Incidunt debitis sunt magnam similique itaque ipsum.','0','1'),
('26','11','Suscipit delectus facilis autem et autem veniam. Ut magni aperiam expedita officia voluptates laborum minima. Et quaerat deserunt at omnis.','0','1'),
('27','67','Voluptas cum in ut iusto. Illo amet voluptas vero et nostrum debitis sed. Non temporibus voluptatibus sunt non. Praesentium sit quis vel dolore magnam dolor. Delectus ipsam non sint.','0','0'),
('28','44','Possimus consequatur voluptates non minima debitis. Atque deleniti rem dolorem sunt a. Et dolorem ut esse deleniti sint.','0','1'),
('29','22','Natus nisi nemo aliquid error. Ea tempora dolore voluptas accusantium ratione voluptates. Ut consequatur dolorem consequatur quibusdam. Autem et repudiandae dolorem ipsum accusantium rerum debitis.','0','0'),
('30','67','Quia accusantium maxime aut adipisci recusandae quos ut. Quia aut quaerat nobis voluptate voluptatibus. Ut amet suscipit tempora quia laboriosam. Fuga quia voluptas facilis incidunt.','22','1'),
('31','90','Consectetur aut sunt doloremque et ipsam mollitia laboriosam. Et placeat quasi nesciunt pariatur debitis sunt. Veritatis iusto excepturi architecto voluptatem. Libero qui similique qui optio et aut.','63','1'),
('32','5','Omnis unde non magni natus voluptatem. Et amet non sunt recusandae.','0','1'),
('33','81','Delectus delectus libero vel qui aut dolore. Molestiae voluptate voluptatum est adipisci sed eos similique.','84','0'),
('34','9','Vel tenetur odio similique saepe id. Quam nulla iusto commodi aliquam velit. Veniam voluptates voluptatem rerum ratione quo sequi.','21','0'),
('35','30','Perferendis necessitatibus eligendi saepe perspiciatis necessitatibus. Aut illum quasi odio sunt voluptas eum nihil. Ducimus tempore assumenda ratione voluptate laudantium libero harum.','0','0'),
('36','83','Rerum et eos iure et eveniet dolores dolorem sapiente. Excepturi eius accusantium enim aut maxime ad dolorem. Possimus dolore deserunt reiciendis modi ex molestias.','0','1'),
('37','94','Unde eos fugit tenetur modi maxime ea. Ut ratione alias dolorem explicabo voluptatem est nihil nobis. Debitis error dolore suscipit itaque.','0','1'),
('38','57','Nisi quis dolores dolorum temporibus ab maxime et. Et sunt ut atque ipsum maiores. In nihil tempora praesentium non necessitatibus. Consequatur velit libero dolor praesentium. Reprehenderit est eum dicta accusantium magni.','0','1'),
('39','76','Nam sed sit impedit ea ab blanditiis. Autem sunt impedit totam quia qui atque consequatur error. Repudiandae rerum dolor eligendi dolor tempore. Delectus architecto id culpa quos.','14','0'),
('40','43','Molestias molestiae qui eveniet quo autem placeat aut illum. Consequatur quos facilis maiores. Et pariatur consectetur laboriosam et qui dolore et.','36','0'),
('41','56','Mollitia expedita beatae suscipit error est aperiam aperiam. Ut tempora et autem sit. Architecto consequatur necessitatibus quia eligendi molestiae voluptas voluptatibus. Earum placeat doloremque dolor sint voluptates omnis.','0','1'),
('42','96','Sed hic nihil at aperiam maiores aut quibusdam. Dolores odio voluptatum qui.','64','0'),
('43','80','Et aut aut occaecati maiores et deleniti provident. Voluptas et pariatur iure cumque voluptatum. Dolor provident voluptas quam accusamus sit. Voluptatem voluptatem sequi quam est quidem. Quos dolorem culpa accusamus et eveniet omnis adipisci.','92','1'),
('44','11','Accusamus atque quaerat placeat et. Pariatur quod sed eveniet nulla corrupti. Nam qui quia nihil ut voluptatem sint fugiat in. Ad atque voluptates maiores iure delectus sit itaque. Quas nesciunt non error cupiditate est.','83','1'),
('45','73','Optio aut quis consequatur. Quia voluptas repellendus omnis corrupti.','17','0'),
('46','87','Consectetur recusandae optio harum eum corrupti repudiandae. Repellat id quos animi qui. Velit et quia dolore expedita officiis.','0','0'),
('47','95','Neque perspiciatis doloribus cum harum at occaecati molestiae. Officia maiores aspernatur iusto voluptatem in. Dolores dolor rerum hic laudantium commodi est.','0','1'),
('48','17','Molestiae natus deserunt voluptatem quis officia aperiam. Dicta expedita minima dolorum distinctio nisi delectus. Inventore libero et est accusantium autem iure dolor quia. Vel sunt accusamus ut voluptatibus accusantium.','60','0'),
('49','29','Soluta sint et facere sunt quasi. Adipisci blanditiis saepe dolorem. Consequatur et eum odio quibusdam.','0','0'),
('50','2','Consequatur maxime ut sed nam. Voluptates aut enim aut amet. Praesentium quo cumque commodi nobis ea ut. Maiores minima odit atque odit cupiditate ad.','0','1'),
('51','58','Aut eum error voluptate ipsa officiis repudiandae iure animi. Repellat hic aperiam ut ea assumenda. Inventore hic doloremque dignissimos qui sapiente aliquam. Qui voluptas et facilis eveniet.','20','0'),
('52','54','Reprehenderit rerum esse eius et. Laborum atque sunt nesciunt necessitatibus. Quis repudiandae magnam minima beatae. Autem libero soluta atque quo sit. Distinctio et sapiente quos ut eius id.','0','0'),
('53','39','Asperiores ex quia perferendis animi necessitatibus eveniet enim. Sint molestiae dolorum odio sed repudiandae enim omnis. Vitae iusto dolorum nobis possimus ad. Asperiores consectetur quas rem totam ex est.','0','1'),
('54','57','Quod qui eos quidem quasi atque eius. Et ad voluptatum veritatis et. Unde tempore nemo facere sit est hic qui. Aut cum et amet id tempore.','18','1'),
('55','89','Sed corrupti explicabo repudiandae ducimus quaerat expedita consequatur eos. Quam laboriosam amet qui similique amet in. Nemo assumenda numquam amet quasi.','73','0'),
('56','93','Molestias enim delectus dolore eum velit repellat. Ut assumenda quidem et. Dolores facilis iste saepe corporis est sit. Quo qui facilis officiis ut dolor.','12','1'),
('57','99','Ipsam reiciendis ipsam sit dolor soluta. Quo nihil dolorem quia fugit et. Quibusdam recusandae culpa autem enim velit a. Porro nisi culpa aut aut quod eos.','42','1'),
('58','32','Laboriosam eligendi est recusandae odit qui sint cumque placeat. Consequatur repudiandae neque cumque totam. Omnis non sint non recusandae quia nemo vero.','68','1'),
('59','81','Sunt aut temporibus repellat maxime doloribus reiciendis. Deleniti nam illum voluptate velit ut in ex. Adipisci sunt quasi commodi id molestiae tempora.','0','0'),
('60','82','Consequatur voluptatem minus expedita voluptas distinctio nam asperiores quae. Ut accusantium quos qui modi reiciendis. Sed et voluptas modi consequatur odio totam.','40','1'),
('61','79','Molestias voluptas ea beatae qui nihil dolor distinctio. Veritatis nihil nostrum corporis at quia adipisci. Labore aut in quidem consequatur sed.','0','1'),
('62','17','Non expedita ipsam quis id fuga vel. Veritatis quis aliquam ipsam tempore. Pariatur eius ducimus reiciendis a.','0','1'),
('63','3','Veniam repellendus ipsam qui perferendis ipsam placeat. Delectus inventore est amet et quod. Quas voluptas asperiores nihil recusandae ut et harum.','0','0'),
('64','67','At facere molestiae quis qui. Vitae minus laborum id qui id. Et nihil sint quidem sit et in.','0','1'),
('65','99','Sed sed repellendus dolor repellendus fugit. Quae et autem cumque illum. Laboriosam omnis minus adipisci esse magnam cum. Sint ex nisi dignissimos totam consequatur tenetur hic.','7','1'),
('66','6','Ut eius qui quibusdam occaecati quisquam consequatur. Distinctio repudiandae est molestias ex est eius.','40','0'),
('67','23','Minima quia ea ipsa non eligendi qui. Consequatur hic eaque illum amet labore. Doloribus qui amet doloribus repellendus est.','0','0'),
('68','6','Placeat est voluptatem dolor. Saepe accusantium corrupti quibusdam molestias. Minus distinctio vel id mollitia vero.','12','0'),
('69','80','Vero dolor aut ratione earum officiis quidem quod dolorem. Dolorem laboriosam ex qui unde distinctio ut in. Veritatis eligendi illo maxime saepe. Nisi omnis et consequatur odit quo.','0','0'),
('70','59','Voluptatum adipisci eveniet distinctio consequatur qui explicabo. Aliquam dolore dolor quibusdam vitae.','0','1'),
('71','37','Ut aperiam accusamus et ipsam dolorem. Dignissimos eveniet dolorem non minus. Necessitatibus iure pariatur rerum et id enim.','93','1'),
('72','15','Harum sequi suscipit quibusdam alias aut. Sit nobis sunt eos blanditiis. Sit enim dolorem voluptas ut est. Veniam ullam accusamus velit praesentium sed dolorum.','80','0'),
('73','82','Qui ut nesciunt hic ratione. Fugiat eius et praesentium facilis. Natus dolorem iusto quidem deserunt deleniti voluptate quod.','0','1'),
('74','92','Ut explicabo aut et ut neque et eos. Enim optio delectus sed suscipit ut aperiam. Quibusdam facilis nisi ab officia facere debitis reprehenderit qui. Saepe aut ducimus doloremque.','31','1'),
('75','26','Nihil commodi eligendi asperiores quia. Sit et quo totam corrupti consectetur sit veniam est. Placeat laborum natus sed et facere.','0','1'),
('76','96','Eius consequatur voluptas et qui quis molestiae pariatur. Eos nulla adipisci voluptatem esse architecto. Ducimus aliquid maiores maxime dolor et.','0','0'),
('77','6','Ut temporibus nam et quo corporis fugiat aut quo. Velit amet voluptatem unde fugiat architecto quisquam fugiat. Suscipit nemo deleniti laborum vitae alias.','66','1'),
('78','23','Ducimus distinctio et laboriosam qui ut et delectus. Expedita quia vel expedita eaque sint aut. Distinctio rem commodi quasi laudantium praesentium et. Neque impedit doloremque quo quisquam quasi ipsa et nulla.','0','1'),
('79','37','Debitis nihil neque nostrum esse quisquam sit. Vero non ea ex minus eaque. Omnis illo sit nobis maxime dolor et. Iusto necessitatibus inventore dicta possimus ex error.','0','1'),
('80','24','Numquam placeat rem doloremque magnam vero eligendi quibusdam. Est consequatur nesciunt cupiditate repellendus. Est iste ut nihil labore. Nostrum non et voluptatem odit.','0','1'),
('81','35','Facere ut aut maiores quam veniam nulla. Quaerat non consequatur nostrum numquam. Asperiores quo consequatur aut eum est qui.','0','1'),
('82','93','Dicta sunt et alias consequatur fugiat. Iusto aut delectus molestiae dolor. Adipisci temporibus ullam praesentium exercitationem nihil harum. Minima officia quas iusto modi voluptatibus aperiam.','53','0'),
('83','44','Voluptas qui vel voluptas qui. Ab adipisci eligendi consectetur explicabo quae quo consequatur id. Rerum omnis eveniet odio quia molestiae. Ut sint aut non accusamus accusamus sunt et. Hic architecto eum ipsum est mollitia.','93','1'),
('84','34','Quis corporis molestias atque. Molestiae minus nihil labore optio quaerat. Incidunt consequatur ut reprehenderit est rem molestiae. Aperiam rerum sint aut facilis quis. Delectus sapiente non amet sequi iure.','62','0'),
('85','71','Similique laborum voluptas voluptatum. Ex quisquam natus tempore aut consectetur. Quibusdam rerum molestiae qui et sed. Aut inventore omnis ut fugiat blanditiis sunt est.','79','0'),
('86','43','Temporibus voluptas excepturi temporibus minima porro modi non in. Cumque magnam incidunt minus illo aut nihil aut. Praesentium quia adipisci sed dolor. Iste saepe aperiam consequatur voluptatem odio aperiam.','90','0'),
('87','74','Adipisci et sint exercitationem quas accusamus optio. Amet exercitationem quis nemo quisquam earum eos. Ducimus sed hic aut porro. Est ullam aliquid veniam ea recusandae fuga.','9','0'),
('88','62','Aperiam omnis non illo eius molestias cumque. Et vel voluptatum placeat non tempore voluptates.','7','0'),
('89','59','Quis vel animi quia id est consequatur. Aut rem possimus asperiores in sint. Quae possimus omnis nihil esse. Et explicabo voluptatem tempore. Dolorem eligendi voluptate maxime cupiditate aut.','21','0'),
('90','59','Nobis numquam magni molestiae quis. Iusto ea voluptas eius dolorem architecto. Aut quisquam et incidunt eos consequatur cupiditate non. Non earum et quaerat velit consectetur aut aliquam eos.','44','0'),
('91','9','Ratione nulla architecto tempore voluptate quis consectetur. Saepe autem enim excepturi dignissimos. Pariatur voluptatem vel omnis incidunt rerum officia. Omnis enim reiciendis totam sapiente porro sit aut minus.','39','0'),
('92','62','Et doloribus odit laborum eaque ut voluptatem. Sunt qui enim quam et nobis laborum accusamus. Tenetur qui reprehenderit aspernatur iste. Eveniet commodi magnam recusandae rerum ut in sequi.','0','0'),
('93','78','Voluptas delectus sint ipsa maiores blanditiis id. Eaque enim tenetur quasi tempora dolorem. Quis consectetur consectetur qui commodi totam laboriosam officiis accusamus. Consequatur doloribus vero error iure quas ipsam consequatur.','0','1'),
('94','61','Dignissimos fugiat voluptate quam consequuntur distinctio debitis quo. Sunt velit suscipit ullam occaecati ab quis quia.','0','1'),
('95','73','Distinctio aut repellendus recusandae quae sit quod ducimus. Dolores in qui atque illum voluptatum nobis. At expedita suscipit dolor voluptas voluptatem ea enim et.','0','1'),
('96','58','Quia vitae corporis eum soluta dicta cumque soluta. Et consequatur sed rerum eaque sit quia. Omnis aut neque molestiae beatae asperiores. Quidem neque itaque quia inventore debitis voluptatem.','23','1'),
('97','50','Saepe qui voluptatibus enim. Voluptate omnis eveniet consequatur saepe ut quam. Eius placeat odit voluptatem ad blanditiis.','0','0'),
('98','80','Ut et molestiae aut dolor iure dolores reiciendis ea. Laborum reprehenderit occaecati aut et iure fugiat. Esse dolores quisquam laboriosam unde voluptas dolores aut. Nesciunt amet error optio.','76','0'),
('99','46','Aspernatur modi tempore voluptates reiciendis itaque magnam. Facilis temporibus aut natus odio magni. Ut eaque aut sunt nostrum.','61','0'),
('100','29','Vitae libero alias distinctio. Nostrum autem dignissimos dolorem ipsam atque esse provident. Distinctio et quaerat repudiandae quis consectetur. Magnam voluptates voluptatem magnam corporis commodi iure ad quis.','24','1'); 




INSERT INTO `likes` VALUES ('1','55','38','2020-12-20 06:39:03'),
('2','3','45','2021-01-05 01:15:29'),
('3','72','49','2020-12-29 00:25:53'),
('4','2','39','2020-12-22 05:39:46'),
('5','61','64','2021-01-02 09:21:17'),
('6','12','94','2020-12-19 04:46:00'),
('7','74','13','2021-01-02 00:56:49'),
('8','78','47','2020-12-11 21:02:03'),
('9','59','100','2021-01-01 20:01:54'),
('10','53','42','2021-01-11 07:08:29'),
('11','7','25','2021-01-10 01:52:34'),
('12','92','34','2020-12-29 16:17:55'),
('13','48','78','2020-12-22 02:28:03'),
('14','72','52','2020-12-20 11:00:00'),
('15','25','14','2020-12-28 22:01:45'),
('16','36','56','2020-12-17 15:20:10'),
('17','45','90','2021-01-08 11:41:34'),
('18','27','6','2020-12-29 06:50:35'),
('19','62','99','2020-12-18 11:16:22'),
('20','11','58','2021-01-05 09:48:26'),
('21','62','77','2020-12-26 00:12:45'),
('22','65','27','2021-01-08 09:39:28'),
('23','99','45','2020-12-19 02:02:24'),
('24','9','98','2020-12-23 04:15:13'),
('25','41','35','2020-12-27 23:58:48'),
('26','54','31','2020-12-26 11:31:15'),
('27','27','48','2021-01-11 09:03:36'),
('28','83','55','2020-12-20 07:48:14'),
('29','75','60','2020-12-13 08:34:40'),
('30','49','34','2021-01-01 07:09:45'),
('31','16','79','2021-01-01 12:47:11'),
('32','18','45','2020-12-22 08:02:23'),
('33','75','32','2020-12-16 11:22:45'),
('34','83','83','2021-01-10 21:43:38'),
('35','95','29','2021-01-07 05:56:50'),
('36','91','36','2020-12-11 11:38:45'),
('37','13','3','2020-12-13 13:53:12'),
('38','43','35','2020-12-22 16:43:23'),
('39','59','65','2020-12-28 09:26:53'),
('40','58','10','2020-12-20 18:13:03'),
('41','77','25','2020-12-11 14:43:49'),
('42','15','17','2020-12-22 14:47:19'),
('43','72','36','2021-01-04 06:36:45'),
('44','45','58','2020-12-23 17:38:48'),
('45','84','100','2021-01-01 02:02:14'),
('46','17','48','2021-01-07 08:04:31'),
('47','48','94','2021-01-01 00:01:36'),
('48','26','90','2020-12-21 09:09:18'),
('49','82','44','2021-01-08 12:54:40'),
('50','90','5','2020-12-26 23:13:11'),
('51','35','25','2020-12-12 09:59:13'),
('52','62','48','2020-12-14 07:58:52'),
('53','13','32','2020-12-29 22:39:18'),
('54','31','21','2020-12-28 00:12:49'),
('55','38','70','2020-12-22 10:04:53'),
('56','43','55','2020-12-22 05:42:16'),
('57','84','24','2020-12-12 17:12:31'),
('58','56','18','2020-12-31 21:56:42'),
('59','32','23','2020-12-25 17:48:04'),
('60','22','89','2020-12-15 04:08:21'),
('61','41','5','2020-12-28 10:03:41'),
('62','52','49','2020-12-30 02:53:40'),
('63','51','76','2020-12-31 17:10:58'),
('64','22','72','2020-12-27 04:15:38'),
('65','34','8','2020-12-27 22:02:28'),
('66','26','3','2021-01-09 01:13:09'),
('67','5','26','2020-12-18 14:40:42'),
('68','68','31','2021-01-09 15:34:26'),
('69','44','78','2020-12-16 07:31:25'),
('70','92','32','2020-12-24 14:28:53'),
('71','22','51','2020-12-13 01:15:08'),
('72','100','73','2020-12-21 09:56:23'),
('73','51','16','2020-12-25 04:59:49'),
('74','13','20','2020-12-19 05:56:58'),
('75','25','13','2020-12-12 03:15:58'),
('76','92','62','2021-01-10 16:22:58'),
('77','88','6','2021-01-07 22:41:52'),
('78','4','59','2020-12-29 01:01:38'),
('79','58','84','2020-12-12 21:37:47'),
('80','70','5','2021-01-11 00:20:50'),
('81','5','49','2020-12-13 03:33:04'),
('82','16','91','2021-01-05 19:46:07'),
('83','40','52','2020-12-29 15:58:20'),
('84','100','31','2020-12-30 14:25:10'),
('85','45','58','2020-12-14 17:30:32'),
('86','79','60','2020-12-14 07:32:50'),
('87','48','87','2021-01-05 14:35:55'),
('88','82','24','2021-01-01 19:31:09'),
('89','98','25','2021-01-09 04:47:48'),
('90','100','33','2021-01-02 18:39:55'),
('91','5','81','2020-12-27 14:14:16'),
('92','1','40','2021-01-09 02:44:10'),
('93','53','3','2020-12-21 17:44:14'),
('94','93','17','2020-12-31 03:48:24'),
('95','79','15','2020-12-24 18:40:16'),
('96','34','38','2021-01-06 15:25:33'),
('97','49','2','2020-12-14 08:34:10'),
('98','73','81','2020-12-17 12:15:57'),
('99','43','24','2020-12-14 15:15:57'),
('100','28','2','2021-01-01 00:48:05'),
('101','92','62','2020-12-19 04:40:33'),
('102','81','72','2020-12-17 13:39:45'),
('103','78','39','2020-12-16 08:43:32'),
('104','23','41','2020-12-25 10:24:39'),
('105','74','24','2020-12-29 20:45:10'),
('106','32','79','2020-12-25 16:30:07'),
('107','45','15','2020-12-15 20:39:25'),
('108','92','1','2020-12-30 19:29:27'),
('109','93','23','2020-12-24 19:32:25'),
('110','12','85','2020-12-31 14:10:12'),
('111','26','90','2020-12-28 17:46:24'),
('112','9','21','2021-01-01 15:15:59'),
('113','37','1','2020-12-21 06:15:49'),
('114','2','100','2020-12-22 06:52:08'),
('115','4','90','2020-12-23 15:09:33'),
('116','97','71','2021-01-08 07:57:06'),
('117','84','8','2020-12-20 04:30:21'),
('118','83','19','2020-12-30 07:09:57'),
('119','32','82','2020-12-18 02:20:27'),
('120','12','31','2020-12-28 13:30:49'),
('121','6','87','2020-12-13 00:25:53'),
('122','1','1','2020-12-24 05:57:00'),
('123','33','71','2021-01-01 03:19:57'),
('124','35','44','2021-01-09 18:51:15'),
('125','28','16','2021-01-03 23:30:49'),
('126','68','66','2021-01-07 19:51:07'),
('127','76','17','2021-01-07 12:14:53'),
('128','82','57','2021-01-05 20:59:54'),
('129','31','71','2021-01-03 17:05:28'),
('130','7','49','2021-01-07 07:34:16'),
('131','14','80','2020-12-29 19:57:01'),
('132','88','56','2021-01-06 16:01:55'),
('133','74','93','2021-01-03 01:04:04'),
('134','37','69','2020-12-26 23:41:36'),
('135','77','23','2021-01-08 17:51:10'),
('136','96','11','2020-12-16 07:27:22'),
('137','39','48','2021-01-07 02:43:28'),
('138','25','50','2020-12-15 14:22:12'),
('139','4','14','2020-12-23 23:03:49'),
('140','24','50','2020-12-21 11:00:14'),
('141','49','33','2021-01-06 08:17:14'),
('142','73','15','2021-01-09 19:25:34'),
('143','41','49','2021-01-10 18:35:31'),
('144','92','83','2020-12-25 10:17:04'),
('145','6','52','2020-12-12 15:45:28'),
('146','72','7','2021-01-11 05:46:54'),
('147','36','38','2021-01-10 21:03:29'),
('148','68','80','2021-01-02 19:52:09'),
('149','52','40','2020-12-30 02:11:13'),
('150','72','95','2021-01-07 23:37:25'),
('151','84','94','2020-12-25 15:55:54'),
('152','57','73','2020-12-28 18:54:51'),
('153','25','1','2020-12-26 03:42:48'),
('154','62','13','2020-12-24 10:46:34'),
('155','92','62','2021-01-03 08:49:12'),
('156','60','58','2021-01-06 08:08:28'),
('157','35','28','2021-01-06 20:41:55'),
('158','68','66','2021-01-05 08:20:12'),
('159','27','74','2020-12-15 13:31:03'),
('160','37','46','2021-01-10 23:53:38'),
('161','7','18','2020-12-27 15:55:11'),
('162','99','70','2020-12-17 14:28:38'),
('163','99','23','2020-12-30 07:30:52'),
('164','77','25','2020-12-30 14:23:56'),
('165','100','27','2021-01-08 08:20:53'),
('166','62','53','2020-12-30 22:17:05'),
('167','33','43','2020-12-14 06:11:56'),
('168','31','37','2020-12-13 07:31:26'),
('169','50','67','2021-01-10 18:34:20'),
('170','6','19','2021-01-05 03:22:09'),
('171','66','10','2020-12-20 22:27:20'),
('172','58','89','2021-01-08 00:28:00'),
('173','6','32','2020-12-27 17:56:30'),
('174','54','59','2021-01-07 23:26:11'),
('175','56','19','2021-01-07 23:04:32'),
('176','96','88','2020-12-27 00:07:52'),
('177','8','71','2021-01-10 17:23:02'),
('178','82','86','2021-01-04 18:23:23'),
('179','33','37','2020-12-25 04:04:55'),
('180','22','29','2021-01-07 23:03:32'),
('181','24','22','2020-12-13 04:31:22'),
('182','90','13','2020-12-18 11:26:42'),
('183','48','53','2020-12-25 15:23:40'),
('184','30','51','2021-01-11 00:55:02'),
('185','92','55','2020-12-28 15:57:11'),
('186','60','41','2020-12-30 04:59:18'),
('187','28','99','2020-12-28 00:38:11'),
('188','77','7','2021-01-07 14:17:44'),
('189','100','55','2020-12-28 07:12:25'),
('190','33','37','2020-12-30 17:06:50'),
('191','54','86','2020-12-19 19:00:19'),
('192','8','70','2020-12-23 06:04:25'),
('193','32','60','2020-12-19 06:27:37'),
('194','14','57','2021-01-01 13:46:28'),
('195','43','26','2020-12-17 17:31:00'),
('196','95','71','2021-01-05 12:52:43'),
('197','9','48','2020-12-12 00:44:50'),
('198','88','10','2020-12-14 12:38:12'),
('199','75','73','2020-12-17 16:22:49'),
('200','65','4','2020-12-13 18:03:51'),
('201','26','48','2020-12-28 06:04:47'),
('202','73','50','2021-01-03 21:01:32'),
('203','81','50','2020-12-29 13:46:58'),
('204','63','50','2020-12-23 21:55:38'),
('205','11','30','2020-12-25 01:29:14'),
('206','82','96','2021-01-03 21:03:25'),
('207','20','71','2020-12-12 05:37:12'),
('208','26','24','2021-01-07 09:17:35'),
('209','21','27','2021-01-09 12:34:36'),
('210','21','26','2021-01-07 21:13:41'),
('211','46','85','2020-12-22 04:10:21'),
('212','26','81','2021-01-09 17:54:59'),
('213','59','83','2020-12-15 07:17:32'),
('214','65','4','2020-12-15 16:04:39'),
('215','40','62','2021-01-05 12:01:56'),
('216','78','7','2020-12-24 15:47:40'),
('217','63','26','2020-12-13 12:32:16'),
('218','11','63','2020-12-12 20:10:21'),
('219','35','43','2020-12-28 00:18:18'),
('220','37','12','2020-12-16 08:44:07'),
('221','26','72','2021-01-11 10:34:12'),
('222','48','88','2020-12-24 19:18:18'),
('223','52','67','2020-12-16 06:26:42'),
('224','65','38','2020-12-27 15:26:12'),
('225','60','69','2020-12-17 17:41:16'),
('226','84','93','2020-12-14 13:12:12'),
('227','23','74','2020-12-26 00:14:04'),
('228','26','30','2020-12-24 06:05:22'),
('229','98','10','2021-01-04 03:22:13'),
('230','1','92','2020-12-31 14:04:34'),
('231','57','12','2021-01-04 21:12:44'),
('232','60','10','2020-12-20 10:40:09'),
('233','1','25','2021-01-04 03:38:12'),
('234','2','16','2020-12-23 14:03:34'),
('235','63','17','2020-12-28 11:23:36'),
('236','90','59','2020-12-16 10:17:07'),
('237','32','52','2020-12-14 05:30:19'),
('238','8','71','2020-12-16 02:39:58'),
('239','92','82','2020-12-13 18:19:47'),
('240','59','99','2021-01-06 10:28:45'),
('241','15','21','2021-01-06 06:56:39'),
('242','78','44','2020-12-21 23:01:50'),
('243','16','5','2021-01-09 07:20:38'),
('244','94','92','2020-12-30 21:01:10'),
('245','74','20','2020-12-16 07:41:20'),
('246','24','93','2020-12-30 02:56:39'),
('247','89','12','2021-01-03 05:24:04'),
('248','55','84','2020-12-23 19:01:45'),
('249','94','91','2021-01-02 07:38:13'),
('250','78','1','2020-12-27 13:34:37'),
('251','31','12','2020-12-28 16:59:23'),
('252','61','76','2020-12-22 07:53:33'),
('253','60','50','2020-12-13 18:13:01'),
('254','25','27','2020-12-14 22:03:41'),
('255','36','47','2021-01-03 16:22:37'),
('256','43','1','2020-12-29 02:28:56'),
('257','94','43','2020-12-20 19:49:04'),
('258','66','60','2020-12-19 21:36:40'),
('259','73','69','2020-12-24 23:42:33'),
('260','10','19','2021-01-06 23:23:20'),
('261','86','4','2020-12-22 02:45:23'),
('262','20','44','2021-01-07 05:25:53'),
('263','70','87','2020-12-15 19:54:29'),
('264','25','84','2020-12-19 00:19:07'),
('265','26','90','2020-12-21 13:21:16'),
('266','94','6','2020-12-15 14:24:33'),
('267','63','63','2021-01-05 23:35:04'),
('268','66','96','2020-12-24 22:01:38'),
('269','40','9','2020-12-22 07:17:41'),
('270','24','26','2020-12-27 17:43:33'),
('271','22','5','2021-01-11 04:36:00'),
('272','76','88','2021-01-07 01:39:55'),
('273','71','92','2020-12-17 06:51:43'),
('274','100','90','2020-12-23 10:16:59'),
('275','49','85','2020-12-24 10:08:10'),
('276','51','14','2021-01-05 03:09:00'),
('277','88','94','2021-01-04 15:47:56'),
('278','71','44','2020-12-21 12:22:30'),
('279','47','1','2020-12-15 20:38:56'),
('280','77','45','2020-12-21 09:51:43'),
('281','73','100','2020-12-25 11:29:03'),
('282','72','87','2021-01-06 18:22:24'),
('283','71','67','2020-12-26 20:49:32'),
('284','88','4','2020-12-14 18:15:23'),
('285','70','2','2021-01-09 13:55:03'),
('286','60','57','2021-01-03 13:58:05'),
('287','83','44','2021-01-04 11:25:53'),
('288','67','38','2021-01-03 11:25:08'),
('289','35','29','2021-01-07 22:04:54'),
('290','68','57','2021-01-02 21:30:14'),
('291','21','63','2021-01-09 07:41:40'),
('292','22','15','2021-01-07 18:29:53'),
('293','87','81','2020-12-28 14:17:39'),
('294','95','68','2020-12-31 19:50:14'),
('295','20','77','2020-12-17 16:31:27'),
('296','45','83','2020-12-30 01:26:28'),
('297','7','54','2020-12-23 15:22:37'),
('298','29','8','2021-01-01 03:40:02'),
('299','21','24','2021-01-02 14:07:14'),
('300','36','8','2020-12-11 18:34:52'); 


ALTER TABLE posts 
	ADD CONSTRAINT posts_user_id_fk FOREIGN KEY (user_id) REFERENCES users (id),
	ADD CONSTRAINT posts_media_fk FOREIGN KEY (media) REFERENCES media (id)
	;

ALTER TABLE likes
	ADD CONSTRAINT likes_post_id_fk FOREIGN KEY (post_id) REFERENCES posts (id),
	ADD CONSTRAINT likes_user_like_id_fk FOREIGN KEY (user_like_id) REFERENCES users (id)
	;

UPDATE posts SET media = NULL where media = 0;




# Определяем количество лайков полученных 10-ю самыми молодыми пользователями
SELECT SUM(q) as SUMMA from
 	(SELECT COUNT(*) as q, profiles.user_id as a, posts.id as post_ID, likes.post_id as b
	FROM profiles 
	INNER JOIN posts ON profiles.user_id = posts.user_id
	INNER JOIN likes on posts.id = likes.post_id
	GROUP BY likes.post_id
	ORDER BY profiles.birthday DESC LIMIT 10) as d
 

# Определить кто больше поставил лайков (всего) - мужчины или женщины?
SELECT COUNT(gender), gender from
	(SELECT likes.id AS like_id, likes.user_like_id as user_liked, profiles.gender_id as gender
	FROM likes
	INNER JOIN profiles ON likes.user_like_id = profiles.user_id) as tbl 
	GROUP BY gender
	
# Определить кто больше поставил лайков (всего) - мужчины или женщины?
SELECT COUNT(*) AS Quantity, gender_info from
	(SELECT likes.id AS like_id, likes.user_like_id as user_liked, profiles.gender_id as gender_id, gender.gender_info AS gender_info
	FROM likes
	INNER JOIN profiles ON likes.user_like_id = profiles.user_id
	INNER JOIN gender ON profiles.gender_id = gender.id ) as tbl
	GROUP BY gender_info
	
#Самостоятельно - Выбрать 3 поста набравших максимальное количество лайков
SELECT COUNT(*) AS Quantity, ID_OF_POST FROM
	(SELECT posts.id AS ID_OF_POST, likes.id AS ID_OF_LIKE
	FROM posts
	INNER JOIN likes ON posts.id = likes.post_id) as tbl
	GROUP BY ID_OF_POST
	ORDER BY Quantity DESC LIMIT 3
	
	


